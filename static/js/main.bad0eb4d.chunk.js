(this.webpackJsonpsplendor=this.webpackJsonpsplendor||[]).push([[0],{122:function(e,n,t){"use strict";t.r(n);var s=t(61),i=t(99),a=t(14),r=t(10),c=t(11),l=t(22),o=t(17),h=t(16),u=t(0),d=t.n(u),b=t(42),j=t.n(b),p=(t(87),function e(n,t,s,i,a){Object(r.a)(this,e),this.white=n,this.blue=t,this.green=s,this.red=i,this.black=a}),O=function e(n,t,s,i,a,c,l){Object(r.a)(this,e),this.color=n,this.points=t,this.price=new p(s,i,a,c,l)};function m(e){return e.map((function(e){var n=Object(a.a)(e,7),t=n[0],s=n[1],i=n[2],r=n[3],c=n[4],l=n[5],o=n[6];return new O(t,s,i,r,c,l,o)}))}var f=[m([["black",0,1,1,1,1,0],["black",0,1,2,1,1,0],["black",0,2,2,0,1,0],["black",0,0,0,1,3,1],["black",0,0,0,2,1,0],["black",0,2,0,2,0,0],["black",0,0,0,3,0,0],["black",1,0,4,0,0,0],["blue",0,1,0,1,1,1],["blue",0,1,0,1,2,1],["blue",0,1,0,2,2,0],["blue",0,0,1,3,1,0],["blue",0,1,0,0,0,2],["blue",0,0,0,2,0,2],["blue",0,0,0,0,0,3],["blue",1,0,0,0,4,0],["white",0,0,1,1,1,1],["white",0,0,1,2,1,1],["white",0,0,2,2,0,1],["white",0,3,1,0,0,1],["white",0,0,0,0,2,1],["white",0,0,2,0,0,2],["white",0,0,3,0,0,0],["white",1,0,0,4,0,0],["green",0,1,1,0,1,1],["green",0,1,1,0,1,2],["green",0,0,1,0,2,2],["green",0,1,3,1,0,0],["green",0,2,1,0,0,0],["green",0,0,2,0,2,0],["green",0,0,0,0,3,0],["green",1,0,0,0,0,4],["red",0,1,1,1,0,1],["red",0,2,1,1,0,1],["red",0,2,0,1,0,2],["red",0,1,0,0,1,3],["red",0,0,2,1,0,0],["red",0,2,0,0,2,0],["red",0,3,0,0,0,0],["red",1,4,0,0,0,0]]),m([["black",1,3,2,2,0,0],["black",1,3,0,3,0,2],["black",2,0,1,4,2,0],["black",2,0,0,5,3,0],["black",2,5,0,0,0,0],["black",3,0,0,0,0,6],["blue",1,0,2,2,3,0],["blue",1,0,2,3,0,3],["blue",2,5,3,0,0,0],["blue",2,2,0,0,1,4],["blue",2,0,5,0,0,0],["blue",3,0,6,0,0,0],["white",1,0,0,3,2,2],["white",1,2,3,0,3,0],["white",2,0,0,1,4,2],["white",2,0,0,0,5,3],["white",2,0,0,0,5,0],["white",3,6,0,0,0,0],["green",1,3,0,2,3,0],["green",1,2,3,0,0,2],["green",2,4,2,0,0,1],["green",2,0,5,3,0,0],["green",2,0,0,5,0,0],["green",3,0,0,6,0,0],["red",1,2,0,0,2,3],["red",1,0,3,0,2,3],["red",2,1,4,2,0,0],["red",2,3,0,0,0,5],["red",2,0,0,0,0,5],["red",3,0,0,0,6,0]]),m([["black",3,3,3,5,3,0],["black",4,0,0,0,7,0],["black",4,0,0,3,6,3],["black",5,0,0,0,7,3],["blue",3,3,0,3,3,5],["blue",4,7,0,0,0,0],["blue",4,6,3,0,0,3],["blue",5,7,3,0,0,0],["white",3,0,3,3,5,3],["white",4,0,0,0,0,7],["white",4,3,0,0,3,6],["white",5,3,0,0,0,7],["green",3,5,3,0,3,3],["green",4,0,7,0,0,0],["green",4,3,6,3,0,0],["green",5,0,7,3,0,0],["red",3,3,5,3,0,3],["red",4,0,0,7,0,0],["red",4,0,3,6,3,0],["red",5,0,0,7,3,0]])],C=(t(62),t(139)),v=t(136),y=t(137),k=t(135),x=t(103),g=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(r.a)(this,e),this.white=n,this.blue=n,this.green=n,this.red=n,this.black=n,this.wild=0<n?5:0}return Object(c.a)(e,[{key:"sum",value:function(){return this.white+this.blue+this.green+this.red+this.black+this.wild}}]),e}(),w=t.p+"static/media/white-coin.eb7204ef.png",S=t.p+"static/media/blue-coin.dd9993c7.png",R=t.p+"static/media/green-coin.d0135588.png",N=t.p+"static/media/red-coin.97467f0f.png",P=t.p+"static/media/black-coin.184968ab.png",T=t.p+"static/media/wild-coin.fcf1c1c1.png",A=t(1),B="deck",W="board",I="reserved",D="wild";function M(e,n){for(var t=[],s=0,i=Object.entries(e);s<i.length;s++){var r=Object(a.a)(i[s],2),c=r[0],l=r[1];if(0<l){var o=void 0;"coin"===n?o=Object(A.jsx)(F,{color:c,content:l}):"game-card"===n&&(o=Object(A.jsx)(H,{color:c,content:l})),t.push(o)}}return t}function F(e){var n,t=["coinContainer",e.onClick&&!e.disabled?"selectable":e.onClick&&e.disabled?"disabled":""].join(" ");return n="white"===e.color?w:"blue"===e.color?S:"green"===e.color?R:"red"===e.color?N:"black"===e.color?P:e.color===D?T:null,Object(A.jsxs)("div",{className:t,onClick:function(){e.onClick&&!e.disabled&&e.onClick(e.color)},children:[Object(A.jsx)(x.a,{src:n,size:"mini"}),Object(A.jsx)("div",{className:"coinContent",children:e.content})]})}function H(e){var n;n=!0===e.selectable?"selectable":"";var t=["game-card",e.size||"mini",e.color,n].join(" ");return Object(A.jsx)("div",{className:t,children:e.content})}function E(e,n,t){for(var s=new g,i={insufficientFunds:null,charge:s},r=0,c=Object.entries(e);r<c.length;r++){var l=Object(a.a)(c[r],2),o=l[0],h=l[1]-t[o].length;if(n[o]+n.wild<h)return i.insufficientFunds=!0,i;if(n[o]<h?(s[o]=n[o],s.wild+=h-n[o]):s[o]=h,n.wild-s.wild<0)return i.insufficientFunds=!0,i}return i.insufficientFunds=!1,i}function V(e,n,t){var s=e[n];e[n]=e[t],e[t]=s}function z(e){for(var n,t,s=e.length,i=0;i<s;i++)V(e,i,(n=0,t=s-1,Math.floor(Math.random()*(t-n)+n)));return e}var G=function(e){Object(o.a)(t,e);var n=Object(h.a)(t);function t(e){var s;return Object(r.a)(this,t),(s=n.call(this,e)).state={open:!1},s}return Object(c.a)(t,[{key:"setOpen",value:function(e){this.props.finished||this.setState({open:e})}},{key:"handleReserve",value:function(e,n,t,s){this.setState({open:!1}),this.props.handleReserve(e,n,t,s)}},{key:"handleConfirm",value:function(e,n,t,s,i){this.setState({open:!1}),this.props.handleBuy(e,n,t,s,i)}},{key:"render",value:function(){var e,n,t,s,i,a=this,r=this.props,c=r.source,l=r.level,o=r.column,h=r.index,u=r.card,d=r.playerWallet,b=r.playerCards,j=r.deck;if(c===W||c===I)if("undefined"===typeof u)n=Object(A.jsx)(v.a,{});else{e=u.color;var p=u.points,O=u.price,m=M(O,"coin");n=Object(A.jsx)(v.a,{children:Object(A.jsxs)(v.a.Content,{className:e,children:[Object(A.jsx)(v.a.Header,{children:Object(A.jsx)(C.a,{children:Object(A.jsxs)(C.a.Row,{columns:2,children:[Object(A.jsx)(C.a.Column,{children:Object(A.jsx)(F,{color:e})}),Object(A.jsx)(C.a.Column,{textAlign:"right",children:p})]})})}),Object(A.jsx)(v.a.Description,{children:m})]})});var f=E(O,d,b).insufficientFunds;t=Object(A.jsx)(C.a,{children:Object(A.jsxs)(C.a.Row,{columns:2,children:[Object(A.jsx)(C.a.Column,{children:Object(A.jsx)(F,{color:e,size:"mini"})}),Object(A.jsx)(C.a.Column,{textAlign:"right",children:p})]})}),s=m,i=Object(A.jsx)(y.a,{content:"Buy",disabled:f,onClick:function(){return a.handleConfirm(c,l,o,h,u)},positive:!0})}else if(c===B){e="beige",u=j[j.length-1];var x=0<j.length?"selectable":"disabled";n=Object(A.jsxs)("div",{className:["game-card","mini",x,e].join(" "),children:[Object(A.jsx)(C.a.Row,{children:"..."}),Object(A.jsx)(C.a.Row,{children:j.length})]}),t="Level ".concat(l),s="Remaining: ".concat(j.length),o=null}return Object(A.jsxs)(k.a,{onClose:function(){return a.setOpen(!1)},onOpen:function(){return a.setOpen(!0)},open:this.state.open,trigger:n,children:[Object(A.jsx)(k.a.Header,{children:t}),Object(A.jsx)(k.a.Content,{children:s}),Object(A.jsxs)(k.a.Actions,{children:[Object(A.jsx)(y.a,{color:"black",content:"Cancel",onClick:function(){return a.setOpen(!1)}}),Object(A.jsx)(y.a,{color:"yellow",content:"Reserve",disabled:c===I,onClick:function(){return a.handleReserve(c,l,o,u)}}),i]})]})}}]),t}(d.a.Component),J=function(e){Object(o.a)(t,e);var n=Object(h.a)(t);function t(e){return Object(r.a)(this,t),n.call(this,e)}return Object(c.a)(t,[{key:"render",value:function(){for(var e=this.props.cards,n=[],t=0;t<3;t++){for(var s=this.props.decks[t],i=Object(A.jsx)(G,{source:B,level:t,deck:s,handleReserve:this.props.handleReserve,finished:this.props.finished}),a=[],r=0;r<4;r++){var c=e[t][r];a.push(Object(A.jsx)(G,{source:W,level:t,column:r,card:c,playerWallet:this.props.playerWallet,playerCards:this.props.playerCards,handleBuy:this.props.handleBuy,handleReserve:this.props.handleReserve,finished:this.props.finished}))}n.push(Object(A.jsxs)(C.a.Row,{columns:2,children:[Object(A.jsx)(C.a.Column,{width:1,children:i}),Object(A.jsx)(C.a.Column,{width:15,children:Object(A.jsx)(v.a.Group,{itemsPerRow:4,children:a})})]}))}return Object(A.jsx)(C.a,{children:n})}}]),t}(d.a.Component),L=function(e){Object(o.a)(t,e);var n=Object(h.a)(t);function t(e){return Object(r.a)(this,t),n.call(this,e)}return Object(c.a)(t,[{key:"render",value:function(){var e=Object.entries(this.props.coins).map((function(e,n){var t=Object(a.a)(e,2),s=t[0],i=t[1];return Object(A.jsx)(C.a.Row,{children:Object(A.jsx)(F,{color:s,content:i})})}));return Object(A.jsxs)(C.a.Column,{children:[e,Object(A.jsx)(C.a.Row,{children:Object(A.jsx)(U,{coins:this.props.coins,handleCollectCoins:this.props.handleCollectCoins,finished:this.props.finished})})]})}}]),t}(d.a.Component),U=function(e){Object(o.a)(t,e);var n=Object(h.a)(t);function t(e){var s;return Object(r.a)(this,t),(s=n.call(this,e)).handleCoinTake=s.handleCoinTake.bind(Object(l.a)(s)),s.handleCoinReturn=s.handleCoinReturn.bind(Object(l.a)(s)),s.state={open:!1,bankCoins:e.coins,tempCoins:new g,bankCoinsSelectable:s.initBankCoinsSelectable(e.coins),numTempCoins:0,handleCollectCoins:e.handleCollectCoins},s}return Object(c.a)(t,[{key:"initBankCoinsSelectable",value:function(e){for(var n={},t=0,s=Object.entries(e);t<s.length;t++){var i=Object(a.a)(s[t],2),r=i[0],c=i[1];r!==D&&(n[r]=0<c)}return n}},{key:"onOpenModal",value:function(){this.props.finished||this.setState({open:!0,bankCoins:this.props.coins,numTempCoins:0,bankCoinsSelectable:this.initBankCoinsSelectable(this.props.coins)})}},{key:"setAllObjValues",value:function(e,n){for(var t=0,s=Object.keys(e);t<s.length;t++){e[s[t]]=n}}},{key:"handleCoinTake",value:function(e){var n=Object.assign({},this.state.bankCoins),t=Object.assign({},this.state.tempCoins),s=this.state.numTempCoins,i=Object.assign({},this.state.bankCoinsSelectable);if(n[e]--,t[e]++,0===++s)alert("Why was it negative");else if(1===s)n[e]<3?i[e]=!1:i[e]=0<n[e];else if(2===s)if(1<t[e])this.setAllObjValues(i,!1);else{for(var a=0,r=Object.keys(t);a<r.length;a++){var c=r[a];0<t[c]&&(i[c]=!1)}i[e]=!1}else 2<s&&this.setAllObjValues(i,!1);this.setState({bankCoins:n,tempCoins:t,numTempCoins:s,bankCoinsSelectable:i})}},{key:"handleCoinReturn",value:function(e){var n=Object.assign({},this.state.bankCoins),t=Object.assign({},this.state.tempCoins),s=this.state.numTempCoins,i=Object.assign({},this.state.bankCoinsSelectable);if(n[e]++,t[e]--,--s<2)this.setAllObjValues(i,!0);else if(2===s)for(var a=0,r=Object.keys(i);a<r.length;a++){var c=r[a];i[c]=0===t[c]}this.setState({bankCoins:n,tempCoins:t,numTempCoins:s,bankCoinsSelectable:i})}},{key:"handleConfirm",value:function(e){this.setState({tempCoins:new g,open:!1}),this.state.handleCollectCoins(e)}},{key:"handleCancel",value:function(){for(var e=Object.assign({},this.state.bankCoins),n=Object.assign({},this.state.tempCoins),t=0,s=Object.keys(n);t<s.length;t++){var i=s[t];e[i]+=n[i],n[i]=0}this.setState({bankCoins:e,tempCoins:n,numTempCoins:0,open:!1})}},{key:"render",value:function(){var e=this,n=this.state.open,t=Object.entries(this.state.bankCoins).map((function(n,t){var s=Object(a.a)(n,2),i=s[0],r=s[1],c=!e.state.bankCoinsSelectable[i],l=Object(A.jsx)(F,{color:i,content:r,disabled:c,onClick:e.handleCoinTake}),o=Object(A.jsx)(F,{color:i,content:e.state.tempCoins[i],onClick:e.handleCoinReturn});return i!==D?Object(A.jsxs)(C.a.Row,{children:[l,e.state.tempCoins[i]>0&&o]}):Object(A.jsx)(A.Fragment,{})}));return Object(A.jsxs)(k.a,{className:"bank",onClose:function(){return e.handleCancel()},onOpen:function(){return e.onOpenModal()},open:n,trigger:Object(A.jsx)(y.a,{children:"Collect Coins"}),children:[Object(A.jsx)(k.a.Header,{children:"Select Coins"}),Object(A.jsx)(k.a.Content,{children:t}),Object(A.jsxs)(k.a.Actions,{children:[Object(A.jsx)(y.a,{color:"black",content:"Cancel",onClick:function(){return e.handleCancel()}}),Object(A.jsx)(y.a,{content:"confirm",onClick:function(){return e.handleConfirm(e.state.tempCoins)},positive:!0,disabled:0===this.state.numTempCoins})]})]})}}]),t}(d.a.Component),q=function e(n,t,s,i,a,c,l){Object(r.a)(this,e),this.points=n,this.price=new p(t,s,i,a,c),this.isDisplayed=l},K=[[3,1,0,0,0,0],[3,0,1,0,0,0],[3,0,0,1,0,0],[3,0,0,0,1,0],[3,0,0,0,0,1],[3,1,0,0,0,0],[3,0,1,0,0,0],[3,0,0,1,0,0],[3,0,0,0,1,0],[3,0,0,0,0,1]].map((function(e){var n=Object(a.a)(e,6),t=n[0],s=n[1],i=n[2],r=n[3],c=n[4],l=n[5];return new q(t,s,i,r,c,l,!0)}));function Q(e){var n=e.isDisplayed,t=["noble",e.selectable?"selectable":""].join(" ");return n?Object(A.jsxs)("div",{className:t,children:[Object(A.jsxs)(C.a.Row,{children:["VP: ",e.points]}),M(e.price,"game-card")]}):Object(A.jsx)(A.Fragment,{})}var X=function(e){Object(o.a)(t,e);var n=Object(h.a)(t);function t(e){return Object(r.a)(this,t),n.call(this,e)}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props.noblemen.map((function(e){return Object(A.jsx)(C.a.Column,{children:Object(A.jsx)(Q,{points:e.points,price:e.price,isDisplayed:e.isDisplayed})})}));return Object(A.jsx)(C.a,{columns:this.props.noblemen.length,children:e})}}]),t}(d.a.Component),Y=function(e){Object(o.a)(t,e);var n=Object(h.a)(t);function t(e){var s;return Object(r.a)(this,t),(s=n.call(this,e)).state={open:e.open},s}return Object(c.a)(t,[{key:"handleConfirm",value:function(e){this.setState({open:!1}),this.props.handleNoblemenSelection(e)}},{key:"handleSelect",value:function(e){this.setState({selectedNoble:e})}},{key:"render",value:function(){var e=this,n=this.props.selectableNoblemen.map((function(n,t){var s=e.props.noblemen[t];return n?Object(A.jsx)(C.a.Column,{onClick:function(){return e.handleConfirm(t)},children:Object(A.jsx)(Q,{points:s.points,price:s.price,isDisplayed:s.isDisplayed,selectable:!0})}):Object(A.jsx)(C.a.Column,{})}));return Object(A.jsxs)(k.a,{open:this.props.open,children:[Object(A.jsx)(k.a.Header,{children:"Select Noble"}),Object(A.jsx)(k.a.Content,{children:Object(A.jsx)(C.a,{columns:n.length,children:n})})]})}}]),t}(d.a.Component),Z=function(e){Object(o.a)(t,e);var n=Object(h.a)(t);function t(e){return Object(r.a)(this,t),n.call(this,e)}return Object(c.a)(t,[{key:"render",value:function(){var e=Object.entries(this.props.coins).map((function(e,n){var t=Object(a.a)(e,2),s=t[0],i=t[1],r=Object(A.jsx)(F,{color:s,content:i});return Object(A.jsx)(C.a.Column,{children:0<i&&r})})),n=Object.entries(this.props.cards).map((function(e){var n=Object(a.a)(e,2),t=n[0],s=n[1],i=Object(A.jsx)(H,{color:t,content:s.length});return Object(A.jsx)(C.a.Column,{children:0<s.length&&i})})),t=this.props.activePlayer&&!this.props.finished?"active":null;return Object(A.jsxs)(C.a,{className:t,children:[Object(A.jsxs)(C.a.Row,{columns:2,children:[Object(A.jsx)(C.a.Column,{children:this.props.points}),Object(A.jsx)(C.a.Column,{textAlign:"right",children:this.props.name})]}),Object(A.jsx)(C.a.Row,{columns:6,children:e}),Object(A.jsxs)(C.a.Row,{columns:6,children:[n,Object(A.jsx)(C.a.Column,{children:Object(A.jsx)($,Object(s.a)({},this.props))})]})]})}}]),t}(d.a.Component),$=function(e){Object(o.a)(t,e);var n=Object(h.a)(t);function t(e){var s;return Object(r.a)(this,t),(s=n.call(this,e)).state={open:!1},s}return Object(c.a)(t,[{key:"setOpen",value:function(e){this.props.finished||this.setState({open:e})}},{key:"render",value:function(){var e=this,n=this.state.open,t=this.props.name,s=Object.entries(this.props.cards).map((function(e){var n=Object(a.a)(e,2),t=(n[0],n[1]),s=Object.values(t).map((function(e){return Object(A.jsx)(C.a.Row,{children:Object(A.jsx)(H,{size:"small",color:e.color,content:M(e.price,"coin")})})}));return Object(A.jsx)(C.a.Column,{children:s})})),i=this.props.reserved.map((function(n,t){return Object(A.jsx)(C.a.Row,{children:Object(A.jsx)(G,{source:I,index:t,card:n,playerWallet:e.props.coins,playerCards:e.props.cards,handleBuy:e.props.handleBuy})})}));return Object(A.jsxs)(k.a,{onClose:function(){return e.setOpen(!1)},onOpen:function(){return e.setOpen(!0)},open:n,trigger:Object(A.jsx)("div",{className:"game-card mini selectable",children:"..."}),children:[Object(A.jsx)(k.a.Header,{children:Object(A.jsxs)(C.a,{columns:2,children:[Object(A.jsx)(C.a.Column,{children:this.props.points}),Object(A.jsx)(C.a.Column,{textAlign:"right",children:t})]})}),Object(A.jsx)(k.a.Content,{children:Object(A.jsxs)(C.a,{columns:6,children:[s,Object(A.jsx)(C.a.Column,{children:i})]})}),Object(A.jsx)(k.a.Actions,{children:Object(A.jsx)(y.a,{color:"black",content:"Cancel",onClick:function(){return e.setOpen(!1)}})})]})}}]),t}(d.a.Component),_=function e(){Object(r.a)(this,e),this.white=[],this.blue=[],this.green=[],this.red=[],this.black=[]},ee=function(){function e(n,t){Object(r.a)(this,e),this.coins=new g,this.cards=new _,this.reserved=[],this.points=0,this.noblemen=[],this.name=n,this.position=t}return Object(c.a)(e,[{key:"reserve",value:function(e){this.reserved.push(e)}},{key:"addNoble",value:function(e){this.noblemen.push(e)}},{key:"addPoints",value:function(e){this.points+=e}}]),e}(),ne=function(e){Object(o.a)(t,e);var n=Object(h.a)(t);function t(e){var s;return Object(r.a)(this,t),(s=n.call(this,e)).handleCoinTake=s.handleCoinTake.bind(Object(l.a)(s)),s.handleCoinReturn=s.handleCoinReturn.bind(Object(l.a)(s)),s.state={open:!1,playerCoins:e.coins,numPlayerCoins:e.coins.sum(),tempCoins:new g,refreshState:!0},s}return Object(c.a)(t,[{key:"componentDidUpdate",value:function(){!this.props.finished&&this.props.open&&this.state.refreshState&&this.setState({playerCoins:this.props.coins,numPlayerCoins:this.props.coins.sum(),tempCoins:new g,refreshState:!1})}},{key:"setAllObjValues",value:function(e,n){for(var t=0,s=Object.keys(e);t<s.length;t++){e[s[t]]=n}}},{key:"handleCoinTake",value:function(e){var n=Object.assign({},this.state.playerCoins),t=Object.assign({},this.state.tempCoins);n[e]--,t[e]++,this.setState({playerCoins:n,tempCoins:t,numPlayerCoins:this.state.numPlayerCoins-1})}},{key:"handleCoinReturn",value:function(e){var n=Object.assign({},this.state.playerCoins),t=Object.assign({},this.state.tempCoins);n[e]++,t[e]--,this.setState({playerCoins:n,tempCoins:t,numPlayerCoins:this.state.numPlayerCoins+1})}},{key:"handleConfirm",value:function(e){this.setState({tempCoins:new g,open:!1,refreshState:!0}),this.props.handleReturnCoins(e)}},{key:"render",value:function(){var e=this,n=this.props.open,t=Object.entries(this.state.playerCoins).map((function(n,t){var s=Object(a.a)(n,2),i=s[0],r=s[1],c=r<=0,l=Object(A.jsx)(F,{color:i,content:r,disabled:c,onClick:e.handleCoinTake}),o=Object(A.jsx)(F,{color:i,content:e.state.tempCoins[i],onClick:e.handleCoinReturn});return Object(A.jsxs)(C.a.Row,{children:[l,e.state.tempCoins[i]>0&&o]})}));return Object(A.jsxs)(k.a,{className:"bank",onClose:function(){return alert("you must return down to 10 coins")},onOpen:function(){return alert("modal opened")},open:n,trigger:null,children:[Object(A.jsx)(k.a.Header,{children:"Return down to 10 coins"}),Object(A.jsx)(k.a.Content,{children:t}),Object(A.jsx)(k.a.Actions,{children:Object(A.jsx)(y.a,{content:"confirm",onClick:function(){return e.handleConfirm(e.state.tempCoins)},positive:!0,disabled:10<this.state.numPlayerCoins})})]})}}]),t}(d.a.Component),te=function(e){Object(o.a)(t,e);var n=Object(h.a)(t);function t(e){var s;Object(r.a)(this,t),(s=n.call(this,e)).handleCollectCoins=s.handleCollectCoins.bind(Object(l.a)(s)),s.handleReturnCoins=s.handleReturnCoins.bind(Object(l.a)(s)),s.handleBuy=s.handleBuy.bind(Object(l.a)(s)),s.handleReserve=s.handleReserve.bind(Object(l.a)(s)),s.handleNoblemenSelection=s.handleNoblemenSelection.bind(Object(l.a)(s));var i=[z(f[0]),z(f[1]),z(f[2])],a=s.initCards(i);return s.state={history:[{cards:[Array(4),Array(4),Array(4)],players:s.initPlayers(e.numPlayers)}],players:s.initPlayers(e.numPlayers),currentPlayerIdx:0,bankCoins:new g({2:4,3:5,4:7}[e.numPlayers]),returnCoinsModalOpen:!1,stepNumber:0,moveHistory:[null],historyReversed:!1,cards:a,decks:i,noblemen:s.initNoblemen(e.numPlayers),noblemenSelectionOpen:!1,selectableNoblemen:[],numPlayers:e.numPlayers,pointsToWin:e.pointsToWin,maxReserve:3,finished:!1},s}return Object(c.a)(t,[{key:"initPlayers",value:function(e){for(var n=Array(e),t=0;t<e;t++)n[t]=new ee("player"+t,t);return n}},{key:"initCards",value:function(e){for(var n=Array(3),t=0;t<n.length;t++){for(var s=Array(4),i=0;i<s.length;i++)s[i]=e[t].pop();n[t]=s}return n}},{key:"initNoblemen",value:function(e){return z(K).slice(0,e+1)}},{key:"handleCollectCoins",value:function(e){for(var n=this.state.players.slice(0,this.state.numPlayers+1),t=Object.assign({},this.state.bankCoins),s=n[this.state.currentPlayerIdx].coins,i=0,a=Object.keys(e);i<a.length;i++){var r=a[i];t[r]-=e[r],s[r]+=e[r]}10<s.sum()?this.setState({players:n,bankCoins:t,returnCoinsModalOpen:!0}):(this.setState({players:n,bankCoins:t}),this.handleEndTurn())}},{key:"handleReturnCoins",value:function(e){for(var n=this.state.players.slice(0,this.state.numPlayers+1),t=Object.assign({},this.state.bankCoins),s=n[this.state.currentPlayerIdx].coins,i=0,a=Object.keys(e);i<a.length;i++){var r=a[i];t[r]+=e[r],s[r]-=e[r]}this.setState({players:n,bankCoins:t,returnCoinsModalOpen:!1}),this.handleEndTurn()}},{key:"handleBuy",value:function(e,n,t,s,i){var r=this.state.players.slice(0,this.state.numPlayers+1),c=r[this.state.currentPlayerIdx],l=c.coins,o=c.cards,h=Object.assign({},this.state.bankCoins),u=E(i.price,l,o),d=u.insufficientFunds,b=u.charge;if(d)alert("Insufficient Funds");else{for(var j=0,p=Object.entries(b);j<p.length;j++){var O=Object(a.a)(p[j],2),m=O[0],f=O[1];l[m]-=f,h[m]+=f}o[i.color].push(i),c.addPoints(i.points);var C=this.state.cards.slice(),v=this.state.decks.slice();e===W?C[n][t]=0<v[n].length?v[n].pop():null:e===I&&c.reserved.splice(s,1),this.setState({players:r,bankCoins:h,cards:C,decks:v}),this.handleEndTurn()}}},{key:"handleReserve",value:function(e,n,t,s){var i=this.state.players.slice(0,this.state.numPlayers+1),a=i[this.state.currentPlayerIdx],r=a.reserved,c=Object.assign({},this.state.bankCoins);if(this.state.maxReserve<=r.length)alert("exceeds max allow reservations");else if(null!==s){a.reserve(s),0<c.wild&&(a.coins.wild++,c.wild--);var l=this.state.decks.slice(),o=this.state.cards.slice();e===B?l[n].pop():o[n][t]=l[n].pop(),this.setState({players:i,bankCoins:c,cards:o,decks:l}),10<a.coins.sum()?this.setState({returnCoinsModalOpen:!0}):this.handleEndTurn()}}},{key:"rank",value:function(e){return e.slice().sort((function(e,n){return n.points-e.points}))}},{key:"calculateWinner",value:function(e){return this.state.pointsToWin<=e[0].points?e[0]:null}},{key:"declareWinner",value:function(e){var n=e.map((function(e,n){return"\n".concat(n+1,". ").concat(e.name," ").concat(e.points)}));alert("Winner: \n"+n)}},{key:"displayRank",value:function(e){return e.map((function(e,n){return"\n".concat(n+1,". ").concat(e.name," : ").concat(e.points)}))}},{key:"listSelectableNoblemen",value:function(e,n){return n.map((function(n){if(!n.isDisplayed)return!1;for(var t=0,s=Object.keys(n.price);t<s.length;t++){var i=s[t];if(e.cards[i].length<n.price[i])return!1}return!0}))}},{key:"handleNoblemenSelection",value:function(e){var n=this.state,t=n.currentPlayerIdx,s=n.numPlayers,i=this.state.players.slice(),a=i[t],r=this.state.noblemen.slice(),c=r[e];c.isDisplayed=!1,a.addNoble(c),a.addPoints(c.points),this.setState({players:i,noblemen:r,selectableNoblemen:[],noblemenSelectionOpen:!1}),this.handleWinner(i,t,s),this.handleNextTurn(t,s)}},{key:"handleWinner",value:function(e,n,t){if(n+1===t){var s=this.rank(e);this.calculateWinner(s)&&(this.setState({finished:!0}),alert(this.displayRank(s)))}}},{key:"handleNextTurn",value:function(e,n){this.state.finished||this.setState({currentPlayerIdx:(e+1)%n})}},{key:"any",value:function(e){var n,t=Object(i.a)(e);try{for(t.s();!(n=t.n()).done;){if(!0===n.value)return!0}}catch(s){t.e(s)}finally{t.f()}return!1}},{key:"handleEndTurn",value:function(){var e=this.state,n=e.players,t=e.noblemen,s=e.currentPlayerIdx,i=e.numPlayers,a=n[s],r=this.listSelectableNoblemen(a,t);this.any(r)?this.setState({noblemenSelectionOpen:!0,selectableNoblemen:r}):(this.setState({selectableNoblemen:[]}),this.handleWinner(n,s,i),this.handleNextTurn(s,i))}},{key:"render",value:function(){var e,n=this,t=this.state,i=t.history,a=t.moveHistory,r=t.cards,c=t.decks,l=t.noblemen,o=t.noblemenSelectionOpen,h=t.selectableNoblemen,u=t.currentPlayerIdx,d=(t.numPlayers,t.finished),b=(i[this.state.stepNumber],Object.values(this.state.players).map((function(e){return Object(A.jsx)(Z,Object(s.a)(Object(s.a)({},e),{},{activePlayer:e.position===u,finished:d,handleBuy:n.handleBuy}))})));if(d){var j=this.rank(this.state.players);e="Game Over:\n"+this.displayRank(j)}else e="Next player: "+this.state.players[u].name;var p=i.map((function(e,t){var s=a[t]%3,i=Math.floor(a[t]/3),r=t?"Go to move #"+t+" ("+s+", "+i+")":"Go to game start";return Object(A.jsx)("li",{children:Object(A.jsx)("button",{className:t===n.state.stepNumber?"bold":"",children:r})},t)}));return Object(A.jsxs)(C.a,{padded:!0,children:[Object(A.jsx)(C.a.Column,{width:4,className:"game-players",children:b}),Object(A.jsxs)(C.a.Column,{width:1,className:"game-bank",children:[Object(A.jsx)(L,{coins:this.state.bankCoins,handleCollectCoins:this.handleCollectCoins,finished:d}),Object(A.jsx)(ne,{coins:this.state.players[u].coins,open:this.state.returnCoinsModalOpen,handleReturnCoins:this.handleReturnCoins})]}),Object(A.jsxs)(C.a.Column,{width:6,className:"game-board",children:[Object(A.jsx)(C.a.Row,{children:Object(A.jsx)(X,{noblemen:l})}),Object(A.jsx)(C.a.Row,{children:Object(A.jsx)(Y,{noblemen:l,selectableNoblemen:h,handleNoblemenSelection:this.handleNoblemenSelection,open:o})}),Object(A.jsx)(C.a.Row,{children:Object(A.jsx)(J,{cards:r,decks:c,playerWallet:this.state.players[u].coins,playerCards:this.state.players[u].cards,handleBuy:this.handleBuy,handleReserve:this.handleReserve,finished:d})})]}),Object(A.jsxs)(C.a.Column,{width:1,className:"game-info",children:[Object(A.jsx)("div",{children:e}),Object(A.jsx)("ol",{children:p})]})]})}}]),t}(d.a.Component);j.a.render(Object(A.jsx)(te,{numPlayers:2,pointsToWin:3}),document.getElementById("root"))},87:function(e,n,t){}},[[122,1,2]]]);
//# sourceMappingURL=main.bad0eb4d.chunk.js.map